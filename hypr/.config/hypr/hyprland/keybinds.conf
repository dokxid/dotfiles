# note: i use caps lock as Mod5, see ./hyprland/keybinds.conf
$mainMod = SUPER
$launchMod = MOD5
$scripts = ~/.config/hypr/scripts
$screenshot_folder = ~/Pictures/screenshots

# media keys and fallback
bindl  = ,XF86AudioMute,          exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 0%
bindle = ,XF86AudioRaiseVolume,   exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindle = ,XF86AudioLowerVolume,   exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindl  = ,XF86AudioPlay,          exec, playerctl play-pause
bindl  = ,XF86AudioPrev,          exec, playerctl previous
bindl  = ,XF86AudioNext,          exec, playerctl next
bindle = ,XF86MonBrightnessUp,    exec, ags run-js 'brightness.screen_value += 0.05;'
bindle = ,XF86MonBrightnessDown,  exec, ags run-js 'brightness.screen_value -= 0.05;'

# app launcher: rofi
bind = Control, Space, exec, ~/.config/rofi/scripts/launcher_t1

# launch apps
bind = $launchMod, C,             exec, code          --password-store=gnome --enable-features=UseOzonePlatform --ozone-platform=wayland
bind = $launchMod, P,             exec, webcord       --disable-smooth-scrolling --enable-features=UseOzonePlatform --ozone-platform=wayland
bind = $launchMod, O,             exec, cider       --disable-smooth-scrolling --enable-features=UseOzonePlatform --ozone-platform=wayland
bind = $launchMod, T,             exec, foot
bind = $launchMod, F,             exec, foot yazi
bind = $launchMod, D,             exec, neovide       --size=800x600
bind = $launchMod, W,             exec, firefox
bind = $launchMod + Control, F,   exec, thunar
bind = $mainMod+Shift, Escape,    exec, foot htop

# window interaction
bind = $mainMod, Period,          exec, pkill fuzzel || ~/.local/bin/fuzzel-emoji
bind = $launchMod, Q,             killactive,
bind = Alt, T,                    togglefloating,
bind = Control + $launchMod, Q,   exec, hyprctl kill

# settings / user / power state
bind = $mainMod + Shift + Alt, Delete,              exec, pkill wlogout || wlogout -p layer-shell
bind = Control + Shift + Alt + $mainMod, Delete,    exec, systemctl poweroff
bind = $mainMod + Control + Alt, L,                 exec, hyprlock
bind = Control + $launchMod, Comma,                 exec, XDG_CURRENT_DESKTOP="gnome" gnome-control-center
bind = Control + $launchMod, M,                     exec, pavucontrol

# Screenshot, Record, OCR, Color picker, Clipboard history
bind = $mainMod + Shift + Alt, S,                   exec, grim -g $SLURP_COMMAND - | swappy -f -
# bind = $mainMod + Shift, R,                         exec, temp_img=~/Pictures/screenshots/$(date -u +%Y-%m-%d_%H:%M).png && hyprshade off && grim -g "$(slurp)" $temp_img && wl-copy < $temp_img && hyprshade auto
bind = $mainMod + Shift, R,                         exec, temp_img=~/Pictures/screenshots/$(date -u +%Y-%m-%d_%H:%M).png && grim -g "$(slurp)" $temp_img && wl-copy < $temp_img
bind = $mainMod + Shift, E,                         exec, ~/.config/ags/scripts/record-script.sh --sound
bind = $mainMod + Control + Shift, R,               exec, ~/.config/ags/scripts/record-script.sh --fullscreen
bind = $mainMod + Control + Shift + $launchMod, R,  exec, ~/.config/ags/scripts/record-script.sh --fullscreen-sound
bind = $launchMod + Control, C,                     exec, hyprpicker -a
bind = $launchMod + Control, V,                     exec, pkill fuzzel || cliphist list | fuzzel --no-fuzzy --dmenu | cliphist decode | wl-copy

# ags
bindr = Control + $mainMod, R, exec, killall ags ydotool; ags &
bindr = Control + $mainMod+Alt, R, exec, hyprctl reload; killall ags ydotool; ags &
bind  = Control + $mainMod, T, exec, ~/.config/ags/scripts/color_generation/switchwall.sh
bind  = $launchMod, Slash, exec, ags -t 'cheatsheet'
bind = $mainMod, M, exec, ags run-js 'openMusicControls.value = (!mpris.getPlayer() ? false : !openMusicControls.value);'
bind = $mainMod, Comma, exec, ags run-js 'openColorScheme.value = true; Utils.timeout(2000, () => openColorScheme.value = false);'
bind = $mainMod + Shift, K, exec, ags -t 'osk'
bind = Control + $mainMod, Delete, exec, ags -t 'session'
bindle = ,XF86AudioRaiseVolume, exec, ags run-js 'indicator.popup(1);'
bindle = ,XF86AudioLowerVolume, exec, ags run-js 'indicator.popup(1);'
bindl  = ,XF86AudioMute, exec, ags run-js 'indicator.popup(1);'
bindl  = $mainMod+Shift,M,   exec, ags run-js 'indicator.popup(1);'
bindle = ,XF86MonBrightnessUp, exec, ags run-js 'indicator.popup(1);'
bindle = ,XF86MonBrightnessDown, exec, ags run-js 'indicator.popup(1);'

# navigate windows (only really relevant in dwindle layout)
bind = Alt+Shift, left,   movewindow, l
bind = Alt+Shift, right,  movewindow, r
bind = Alt+Shift, up,     movewindow, u
bind = Alt+Shift, down,   movewindow, d
bind = Alt, left,         movefocus, l
bind = Alt, right,        movefocus, r
bind = Alt, up,           movefocus, u
bind = Alt, down,         movefocus, d
bind = Alt, P,            pin

# navigate windows (only really relevant in master layout)
bind = $launchMod, Tab,       layoutmsg, rollprev
bind = $launchMod+Shift, Tab, layoutmsg, rollnext
bind = Control, Tab,          cyclenext
bind = Control, Tab,          bringactivetotop,   # bring it to the top

# navigate workspaces
bind = Control + $launchMod, right,         workspace, +1
bind = Control + $launchMod, left,          workspace, -1
bind = Control + $launchMod + Shift, Right, movetoworkspace, +1
bind = Control + $launchMod + Shift, Left,  movetoworkspace, -1
bind = Alt + Control, mouse_down,           movetoworkspace, +1
bind = Alt + Control, mouse_up,             movetoworkspace, -1
bind = Alt, mouse_up,                       workspace, +1
bind = Alt, mouse_down,                     workspace, -1

# resize layout
binde = $launchMod, Minus,      splitratio, -0.1
binde = $launchMod, Equal,      splitratio, 0.1
bind  = $launchMod, mouse_up,   splitratio, -0.025
bind  = $launchMod, mouse_down, splitratio, 0.025
bindm = $launchMod, mouse:272,  movewindow
bindm = $launchMod, mouse:273,  resizewindow
bindm = $launchMod, Z,          movewindow
bindm = $launchMod, X,          resizewindow

# Fullscreen
bind = $mainMod + Alt + Shift, D, fullscreen, 0
bind = $mainMod + Alt, D,       fullscreen, 1
bind = $mainMod + Alt, F, fakefullscreen, 0

# Switching
bind = $launchMod, 1, exec, ~/.config/ags/scripts/hyprland/workspace_action.sh workspace 1
bind = $launchMod, 2, exec, ~/.config/ags/scripts/hyprland/workspace_action.sh workspace 2
bind = $launchMod, 3, exec, ~/.config/ags/scripts/hyprland/workspace_action.sh workspace 3
bind = $launchMod, 4, exec, ~/.config/ags/scripts/hyprland/workspace_action.sh workspace 4
bind = $launchMod, 5, exec, ~/.config/ags/scripts/hyprland/workspace_action.sh workspace 5
bind = $launchMod, 6, exec, ~/.config/ags/scripts/hyprland/workspace_action.sh workspace 6
bind = $launchMod, S, swapactiveworkspaces, 0 1
bind = Control+Alt, S, togglespecialworkspace,
bind = $launchMod, space, togglespecialworkspace,
bind = $launchMod, F1, exec, ~/.config/hypr/scripts/togglefancies.sh
bind = $launchMod, F2, exec, hyprshade toggle

# Move window to workspace $mainMod + Alt + [0-9]
bind = $launchMod+Alt, 1, exec, ~/.config/ags/scripts/hyprland/workspace_action.sh movetoworkspacesilent 1
bind = $launchMod+Alt, 2, exec, ~/.config/ags/scripts/hyprland/workspace_action.sh movetoworkspacesilent 2
bind = $launchMod+Alt, 3, exec, ~/.config/ags/scripts/hyprland/workspace_action.sh movetoworkspacesilent 3
bind = $launchMod+Alt, 4, exec, ~/.config/ags/scripts/hyprland/workspace_action.sh movetoworkspacesilent 4
bind = $launchMod+Alt, 5, exec, ~/.config/ags/scripts/hyprland/workspace_action.sh movetoworkspacesilent 5
bind = $launchMod+Alt, 6, exec, ~/.config/ags/scripts/hyprland/workspace_action.sh movetoworkspacesilent 6
bind = $launchMod+Alt, 7, exec, ~/.config/ags/scripts/hyprland/workspace_action.sh movetoworkspacesilent 7
bind = $launchMod+Alt, 8, exec, ~/.config/ags/scripts/hyprland/workspace_action.sh movetoworkspacesilent 8
bind = $launchMod+Alt, 9, exec, ~/.config/ags/scripts/hyprland/workspace_action.sh movetoworkspacesilent 9
bind = $launchMod+Alt, 0, exec, ~/.config/ags/scripts/hyprland/workspace_action.sh movetoworkspacesilent 10
bind = Control+Shift+$mainMod, Up, movetoworkspacesilent, special
bind = $mainMod+Alt, S, movetoworkspacesilent, special

## Testing
bind = $mainMod+Alt, f12, exec, notify-send 'Test notification' "Here's a really long message to test truncation and wrapping\nYou can middle click or flick this notification to dismiss it!" -a 'Shell' -A "Test1=I got it!" -A "Test2=Another action"
bind = $mainMod+Alt, Equal, exec, notify-send "notif: critical" "debug" -u critical -a 'Hyprland keybind'
